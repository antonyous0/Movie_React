{"ast":null,"code":"import _slicedToArray from\"C:/Users/79227/OneDrive/Desktop/react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import CopyButton from\"./../../assets/copy.png\";import EditButton from\"./../../assets/edit.png\";import style from\"./MovieDetails.module.css\";import{useParams,useNavigate}from\"react-router-dom\";import{getMovieById}from\"./../../Services/apiService\";import NotFoundImage from\"./../../assets/404.png\";import{NotificationManager}from\"react-notifications\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var MovieDetails=function MovieDetails(){var _movie$rate;var _useParams=useParams(),id=_useParams.id;var navigate=useNavigate();var _useState=useState(),_useState2=_slicedToArray(_useState,2),movie=_useState2[0],setMovie=_useState2[1];useEffect(function(){getMovieById(Number(id)).then(function(response){setMovie(response);}).catch(function(){NotificationManager.error(\";(\",\"Ошибка при получении фильма по id\");});},[id]);var saveToBuffer=function saveToBuffer(){navigator.clipboard.writeText(\"\".concat(movie===null||movie===void 0?void 0:movie.id));NotificationManager.success(\"id = \".concat(movie===null||movie===void 0?void 0:movie.id),\"Id успешно скопирован\");};return/*#__PURE__*/_jsxs(\"div\",{className:style.movieDetails,children:[/*#__PURE__*/_jsxs(\"div\",{className:style.movieDetailsHeader,children:[/*#__PURE__*/_jsxs(\"div\",{className:style.idBlock,onClick:saveToBuffer,children:[\"Id: \",movie===null||movie===void 0?void 0:movie.id,/*#__PURE__*/_jsx(\"img\",{alt:\"copy\",className:style.copyButtonImage,src:CopyButton})]}),/*#__PURE__*/_jsxs(\"div\",{className:style.editBlock,onClick:function onClick(){navigate(\"/movies/\".concat(id,\"/edit\"));},children:[/*#__PURE__*/_jsx(\"img\",{className:style.editButtonImage,src:EditButton,alt:\"edit\"}),\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:style.movieDetailsMain,children:[/*#__PURE__*/_jsx(\"img\",{className:style.imageWrapper,width:\"300px\",height:\"300px\",src:movie===null||movie===void 0?void 0:movie.posterUrl,onError:function onError(_ref){var currentTarget=_ref.currentTarget;currentTarget.onerror=null;// prevents looping\ncurrentTarget.src=NotFoundImage;},alt:\"poster\"}),/*#__PURE__*/_jsxs(\"div\",{className:style.movieDetailsInfo,children:[/*#__PURE__*/_jsx(\"div\",{className:style.title,children:movie===null||movie===void 0?void 0:movie.title}),/*#__PURE__*/_jsx(\"div\",{className:style.author,children:movie===null||movie===void 0?void 0:movie.director}),/*#__PURE__*/_jsxs(\"div\",{className:style.paramsAndRolesWrapper,children:[/*#__PURE__*/_jsxs(\"section\",{className:style.params,children:[/*#__PURE__*/_jsx(\"div\",{className:style.paramTitle,children:\"\\u041F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u044B\"}),/*#__PURE__*/_jsxs(\"div\",{className:style.paramRow,children:[/*#__PURE__*/_jsx(\"div\",{className:style.paramKey,children:\"\\u0413\\u043E\\u0434 \\u043F\\u0440\\u043E\\u0438\\u0437\\u0432\\u043E\\u0434\\u0441\\u0442\\u0432\\u0430\"}),/*#__PURE__*/_jsx(\"div\",{className:style.paramValue,children:movie===null||movie===void 0?void 0:movie.year})]}),/*#__PURE__*/_jsxs(\"div\",{className:style.paramRow,children:[/*#__PURE__*/_jsx(\"div\",{className:style.paramKey,children:\"\\u041F\\u0440\\u043E\\u0434\\u043E\\u043B\\u0436\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"div\",{className:style.paramValue,children:movie===null||movie===void 0?void 0:movie.runtime})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:style.roles,children:[/*#__PURE__*/_jsx(\"div\",{className:style.roleTitle,children:\"\\u0412 \\u0433\\u043B\\u0430\\u0432\\u043D\\u044B\\u0445 \\u0440\\u043E\\u043B\\u044F\\u0445\"}),movie===null||movie===void 0?void 0:movie.actors.split(\",\").map(function(actor,i){return/*#__PURE__*/_jsx(\"div\",{className:style.role,children:actor},i);})]})]})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:style.descriptionSection,children:[/*#__PURE__*/_jsx(\"div\",{className:style.descriptionTitle,children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"div\",{className:style.description,children:movie===null||movie===void 0?void 0:movie.plot})]}),/*#__PURE__*/_jsxs(\"section\",{className:style.rateSection,children:[/*#__PURE__*/_jsx(\"div\",{className:style.rateTitle,children:\"\\u0422\\u0435\\u043A\\u0443\\u0449\\u0438\\u0439 \\u0440\\u0435\\u0439\\u0442\\u0438\\u043D\\u0433\"}),/*#__PURE__*/_jsx(\"div\",{className:style.rateValue,children:(_movie$rate=movie===null||movie===void 0?void 0:movie.rate)!==null&&_movie$rate!==void 0?_movie$rate:\"-\"})]})]});};","map":{"version":3,"names":["React","useEffect","useState","CopyButton","EditButton","style","useParams","useNavigate","getMovieById","NotFoundImage","NotificationManager","MovieDetails","id","navigate","movie","setMovie","Number","then","response","catch","error","saveToBuffer","navigator","clipboard","writeText","success","movieDetails","movieDetailsHeader","idBlock","copyButtonImage","editBlock","editButtonImage","movieDetailsMain","imageWrapper","posterUrl","currentTarget","onerror","src","movieDetailsInfo","title","author","director","paramsAndRolesWrapper","params","paramTitle","paramRow","paramKey","paramValue","year","runtime","roles","roleTitle","actors","split","map","actor","i","role","descriptionSection","descriptionTitle","description","plot","rateSection","rateTitle","rateValue","rate"],"sources":["C:/Users/79227/OneDrive/Desktop/react/src/components/MovieDetails/MovieDetails.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport CopyButton from \"./../../assets/copy.png\";\r\nimport EditButton from \"./../../assets/edit.png\";\r\nimport style from \"./MovieDetails.module.css\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { getMovieById } from \"./../../Services/apiService\";\r\nimport { MovieDetailsData } from \"../../types\";\r\nimport NotFoundImage from \"./../../assets/404.png\";\r\nimport { NotificationManager } from \"react-notifications\";\r\n\r\nexport const MovieDetails = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [movie, setMovie] = useState<MovieDetailsData>();\r\n\r\n  useEffect(() => {\r\n    getMovieById(Number(id))\r\n      .then((response) => {\r\n        setMovie(response);\r\n      })\r\n      .catch(() => {\r\n        NotificationManager.error(`;(`, \"Ошибка при получении фильма по id\");\r\n      });\r\n  }, [id]);\r\n\r\n  const saveToBuffer = () => {\r\n    navigator.clipboard.writeText(`${movie?.id}`);\r\n    NotificationManager.success(`id = ${movie?.id}`, \"Id успешно скопирован\");\r\n  };\r\n\r\n  return (\r\n    <div className={style.movieDetails}>\r\n      <div className={style.movieDetailsHeader}>\r\n        <div className={style.idBlock} onClick={saveToBuffer}>\r\n          Id: {movie?.id}\r\n          <img\r\n            alt=\"copy\"\r\n            className={style.copyButtonImage}\r\n            src={CopyButton}\r\n          ></img>\r\n        </div>\r\n        <div\r\n          className={style.editBlock}\r\n          onClick={() => {\r\n            navigate(`/movies/${id}/edit`);\r\n          }}\r\n        >\r\n          <img\r\n            className={style.editButtonImage}\r\n            src={EditButton}\r\n            alt=\"edit\"\r\n          ></img>\r\n          Редактировать\r\n        </div>\r\n      </div>\r\n      <div className={style.movieDetailsMain}>\r\n        <img\r\n          className={style.imageWrapper}\r\n          width=\"300px\"\r\n          height=\"300px\"\r\n          src={movie?.posterUrl}\r\n          onError={({ currentTarget }) => {\r\n            currentTarget.onerror = null; // prevents looping\r\n            currentTarget.src = NotFoundImage;\r\n          }}\r\n          alt=\"poster\"\r\n        />\r\n        <div className={style.movieDetailsInfo}>\r\n          <div className={style.title}>{movie?.title}</div>\r\n          <div className={style.author}>{movie?.director}</div>\r\n          <div className={style.paramsAndRolesWrapper}>\r\n            <section className={style.params}>\r\n              <div className={style.paramTitle}>Параметры</div>\r\n              <div className={style.paramRow}>\r\n                <div className={style.paramKey}>Год производства</div>\r\n                <div className={style.paramValue}>{movie?.year}</div>\r\n              </div>\r\n              <div className={style.paramRow}>\r\n                <div className={style.paramKey}>Продолжительность</div>\r\n                <div className={style.paramValue}>{movie?.runtime}</div>\r\n              </div>\r\n            </section>\r\n\r\n            <section className={style.roles}>\r\n              <div className={style.roleTitle}>В главных ролях</div>\r\n              {movie?.actors.split(\",\").map((actor, i) => (\r\n                <div className={style.role} key={i}>\r\n                  {actor}\r\n                </div>\r\n              ))}\r\n            </section>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <section className={style.descriptionSection}>\r\n        <div className={style.descriptionTitle}>Описание</div>\r\n        <div className={style.description}>{movie?.plot}</div>\r\n      </section>\r\n      <section className={style.rateSection}>\r\n        <div className={style.rateTitle}>Текущий рейтинг</div>\r\n        <div className={style.rateValue}>{movie?.rate ?? \"-\"}</div>\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}